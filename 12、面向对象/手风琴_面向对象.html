<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>手风琴</title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
				list-style: none;
			}
			
			.toggle {
				margin-left: 200px;
				width: 200px;
				border: 2px solid #ccc;
				margin-bottom: 10px;
				overflow: hidden;
			}
			
			.toggle h1 {
				font-size: 14px;
				font-weight: normal;
				height: 30px;
				line-height: 30px;
				padding-left: 10px;
				background: #ddd;
				cursor: pointer;
			}
			
			.toggle h1 span {
				margin-right: 5px;
			}
			
			.toggle ul {
				height: 0;
				overflow: hidden;
				transition: all 1s;
			}
			
			.toggle ul li {
				font-size: 12px;
				height: 30px;
				line-height: 30px;
				margin: 10px 0;
				padding: 0 10px;
				cursor: pointer;
			}
			.toggle ul li:hover {
				background: #ddd;
			}
			.toggle ul.content {
				height: 0;
			}
		</style>
	</head>

	<body>
		<div class="box">
			<div class="toggle">
				<h1 class="title"><span>+</span>新手帮助</h1>
				<ul class="content">
					<li>申请支付宝</li>
					<li>支付宝充值</li>
				</ul>
			</div>
			<div class="toggle">
				<h1 class="title"><span>+</span>支付方式</h1>
				<ul class="content">
					<li>支付宝快捷支付</li>
					<li>支付宝余额支付</li>
					<li>新手入门</li>
				</ul>
			</div>
			<div class="toggle">
				<h1 class="title"><span>+</span>商家支持</h1>
				<ul class="content">
					<li>养魔方规则</li>
					<li>国际招商</li>
					<li>服务商招募</li>
					<li>服务商招募</li>
					<li>商家系统对接</li>
					<li>联系我们</li>
				</ul>
			</div>
		</div>
		<script type="text/javascript">
			var title = document.querySelectorAll(".title");
			var box = document.querySelector(".box");
			for(let i = 0; i < title.length; i++) {
				title[i].addEventListener('click', function() {
					var ul = this.nextElementSibling;
					if(this.flag) { // 已展开时，去收起
						ul.style.height = "0px";
						this.flag = false;
					} else {
						var li_len = ul.querySelectorAll("li").length;
						var span = this.children[0];
						ul.style.height = li_len * 45 + "px";
						this.flag = true;  // 表示展开的属性
						var index = box.index;
						console.log(index)
						if (index !== undefined) {
							box.children[index].querySelector('ul').style.height= "0px";
						}
						box.index = i; // 设置父节点一个属性
					}
				})
			}
			
			// 方法二
			
//			var title = document.querySelectorAll(".title");
//			for (var i = 0; i < title.length; i++) {
//				title[i].addEventListener('click', function() {
//					var ul = this.nextElementSibling;
//					if (ul.className.indexOf("content" >= 0)) {
//						var li_len = ul.querySelectorAll("li").length;
//						ul.style.height = li_len * 50 + "px";
//						ul.classList.remove("content")
//					} else {
//						ul.style.height = "0px";
//						ul.classList.add("content");
//					}
//				})
//			}
		</script>
	</body>

</html>
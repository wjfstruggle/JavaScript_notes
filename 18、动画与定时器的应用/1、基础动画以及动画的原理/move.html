<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>从左向右运动</title>
        <style media="screen">
            #div {
                position: absolute;
                left: 20px;
                top: 20px;
                background: skyblue;
                width: 100px;
                height: 100px;
            }
            #div1 {
                position: absolute;
                right: 0;
                bottom: 0;
                background: red;
                width: 20px;
                height: 20px;
            }
        </style>
    </head>
    <body>
        <div id="div">

        </div>
        <script type="text/javascript">
            var div = document.getElementById("div")
            var timer;
            var left = 20;
            // div.addEventListener('click', move);
            // function move() {
            //     timer = setInterval(()=> {
            //         left += 30;
            //         div.style.left = left +'px';
            //         div.style.transition = "all 0.5s linear"
            //         if (left >= 500) {
            //             clearInterval(timer)
            //         }
            //     }, 30)
            // }
            div.onclick = function() {
                move(this, 500)
            }
            function move(el, target) {
                timer = setInterval(()=> {
                    el.style.left = getStyle(el, 'left') + 20 +'px'
                    if (el.style.left < target) {
                        clearInterval(timer)
                    }
                }, 20)
            }
            function getStyle(ele,attr){
                //变量未定义不能直接用，如果相判断一个变量是否存在可以typeof；
                //属性未定义可以直接使用；
                if(typeof getComputedStyle){
                    return parseFloat(getComputedStyle(ele,null)[attr]);
                }else{
                    return parseFloat(attr.currentStyle[attr]);
                }
            };
        </script>
    </body>
</html>
